/**
 * created 11/22/2014
 * 
 * @author arakovskyux
 * @see http://livedocs.dojotoolkit.org/util/doh
 * @description TODO: fill in description
 * 
 * @generated by TemplateWizard, v.2013/01/03 //do not remove this comment please
 */
define([
	"dojo/request/util",
	"dojo/Deferred",
	"dojo/_base/lang"
], function(util, Deferred, lang) {

	// ===== setup request, which will reject dfd with request URI
	// we use error because it is passed, result is processed by store
	function replyUriRequest(uri, options) {
		var deferred = new Deferred();
		var err = lang.mixin(new Error("rejectWithParam"), {
			uri : uri,
			options : options,
			//shortcuts
			method : options.method,
			headers : options.headers,
			data : options.data,
			query : options.query
		});

		deferred.reject(err);
		deferred.response = new Deferred({
			//just mock, but we must provide getHeader, because someone may relay on it
			getHeader : function() {
			}
		});
		return deferred;
	}
	util.addCommonMethods(replyUriRequest);
	return replyUriRequest;
});
