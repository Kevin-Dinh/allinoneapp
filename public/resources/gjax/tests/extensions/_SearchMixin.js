/**
 * created 03/14/2013
 * 
 * @author arakovsky
 * 
 * @description unit test for module "gjax/extensions/validationTextBox"
 * 
 * @generated by TemplateWizard, v.2012/11/21 //do not remove this comment please
 * @see http://livedocs.dojotoolkit.org/util/doh
 */
define([
	"dojo/ready",
	"doh",
	"dijit/registry",
	"dojo/Deferred",
	"dojo/store/Memory",
	//TESTED LIBS:
	"gjax/extensions/_AutoCompleterMixin",
	"gjax/extensions/_SearchMixin",
	"dijit/form/FilteringSelect",
	"dojo/parser"
], function(ready, doh, registry, Deferred, Memory) {

	var testObject = {
		startSearchAllDuration : function() {
			var fs = registry.byId("fs1");
			fs._startSearchAll();
			var def = new Deferred();
			setTimeout(function() {
				//extension ensures that startSearchAll doesn't wait for searchDelay (200) so dropdown should already be open
				fs._opened ? def.resolve() : def.reject(new Error("Dropdown should already be open."));
			}, 100);
			return def;
		}
	};

	// --------------------------------------
	doh.register("search-mixin-startSearchAll-duration", testObject);

	ready(function() {
		var fs = registry.byId("fs1");
		fs.set("store", new Memory({
			data : [
				{
					id : 1,
					name : "Item 1"
				},
				{
					id : 2,
					name : "Item 2"
				},
				{
					id : 3,
					name : "Item 3"
				}
			]
		}));

		doh.run();
	});
});